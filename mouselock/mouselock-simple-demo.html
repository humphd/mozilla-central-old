<!DOCTYPE html>
<html>
  <head>
		<title>Mouselock: Simple demo</title>
  </head>
  <body>
		<div>
			<p>Click to enter mouselock, click again to unlock, click again to exit full screen. </p>

		</div>
		<div style="background-color:blue; width:500px; height:500px;" id="div">
			<p style="color:White" id='info'>Demo page</p>
		</div>
		<script>
			var ele = document.getElementById('div');
			var pointer = navigator.mozPointer;
			var infoText = document.getElementById('info');
			document.body.addEventListener('click', function() {
				if (!document.mozFullScreen){
					ele.mozRequestFullScreen();
				} else if (pointer.isLocked()) {
					pointer.unlock();
				} else {
					document.mozCancelFullScreen();
				}
			}, false)

			// Mouse move event listener
			ele.addEventListener('mousemove', function(e) {
				if (pointer.isLocked) {
					infoText.innerHTML = 'Movement X: ' + e.movementX +
                               ' Movement Y: ' + e.movementY +
                               ' Client X: ' + e.clientX +
                               ' Client Y: ' + e.clientY +
                               ' Screen X:	' + e.screenX +
                               ' Screen Y: ' + e.screenY;
				}
			} ,false);

			document.addEventListener('mozfullscreenchange', function() {
				console.log("=== Full Screen mode changed ===");
				if (document.mozFullScreen) {
					pointer.lock(ele);
					if (pointer.isLocked) {
						console.log("=== Mouse lock enabled! ===");
					}
				}
			}, false)

			ele.addEventListener('mouselocklost', function() {
				console.log('=== Mouse lock lost! ===');
			}, false);

		</script>
  </body>
</html>
